import time
import paramiko

host = "192.168.31.186"
username = "moja"
password = "123456"

commands = ['sudo su','ls | grep Pictures', 'echo  fabric这么好的东西，终究很难用！，好吧，出来了，想要的效果,paramiko不错，吃饭去！',"whoami"]
client = paramiko.SSHClient()
client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
client.connect(host, username=username, password=password)
channel = client.invoke_shell()

# clear welcome message and send newline
time.sleep(1) 
channel.recv(9999)
channel.send("\n")
time.sleep(1)

for command in commands:
    channel.send(command + "\n")
    while not channel.recv_ready(): #Wait for the server to read and respond
        time.sleep(0.1)
    time.sleep(0.1) #wait enough for writing to (hopefully) be finished
    output = channel.recv(9999) #read in
    print(output.decode('utf-8'))
    time.sleep(0.1)
channel.close()
